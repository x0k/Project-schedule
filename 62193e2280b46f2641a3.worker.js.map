{"version":3,"sources":["../webpack/bootstrap","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/eventa/build/utils/dateTime.js","constants/partitions.js","utils/grouper.js","workers/group/group.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_defineProperty","obj","configurable","writable","getMonthLength","year","month","Date","getDate","minute","hour","dateTime_day","week","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR","PARTITIONS_SIZES","_PARTITIONS_SIZES","day","date","getFullYear","getMonth","sum","getPartitionSize","partition","ms","size","getPartitionStart","start","setMonth","setHours","setDate","getDay","dt","setMinutes","Error","concat","getStartDate","getTime","groupBy","list","length","groups","isStatic","isStaticPartition","staticLength","getLength","period","items","group","push","self","onmessage","_ref","_ref$data","data","grouped","events","postMessage"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,qBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,kBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,qBAIAlC,IAAAmC,EAAA,kCClFe,SAAAC,EAAAC,EAAAV,EAAAN,GAYf,OAXAM,KAAAU,EACAvB,OAAAC,eAAAsB,EAAAV,EAAA,CACAN,QACAL,YAAA,EACAsB,cAAA,EACAC,UAAA,IAGAF,EAAAV,GAAAN,EAGAgB,ECTO,SAAAG,EAAAC,EAAAC,GACP,WAAAC,KAAAF,EAAAC,EAAA,KAAAE,iBAEO,MACAC,EAAA,IACAC,EAAA,KACIC,EAAG,MACPC,EAAA,OCRA,IAAMC,EAAS,SACTC,EAAO,OACPC,EAAM,MACNC,EAAO,OACPC,EAAQ,QACRC,EAAO,OAEPC,GAAgBnB,EAAAoB,EAAA,GAC1BP,EAASJ,GADiBT,EAAAoB,EAE1BN,EAAOJ,GAFmBV,EAAAoB,EAG1BL,EAAMM,GAHoBrB,EAAAoB,EAI1BJ,EAAOJ,GAJmBZ,EAAAoB,EAK1BH,EAAQ,SAAAK,GAAI,OAAID,EAAMjB,EAAekB,EAAKC,cAAeD,EAAKE,cALpCxB,EAAAoB,EAM1BF,EAAO,SAAAI,GAGN,IAFA,IAAMjB,EAAOiB,EAAKC,cACdE,EAAM,EACDzD,EAAI,EAAGA,EAAI,GAAIA,IACtByD,GAAOJ,EAAMjB,EAAeC,EAAMrC,GAEpC,OAAOyD,IAZkBL,GCCtB,SAASM,EAAkBC,EAAWC,GAC3C,IAAMC,EAAOV,EAAiBQ,GAC9B,MAAoB,oBAATE,EAEFA,EADM,IAAItB,KAAKqB,IAGjBC,EAgCF,SAASC,EAAmBH,EAAWI,GAC5C,OA9BF,SAAuBJ,EAAWI,GAChC,IAAMT,EAAO,IAAIf,KAAKwB,GACtB,OAAQJ,GACN,KAAKT,EAGH,OAFAI,EAAKU,SAAS,EAAG,GACjBV,EAAKW,SAAS,EAAG,EAAG,EAAG,GAChBX,EACT,KAAKL,EAGH,OAFAK,EAAKY,QAAQ,GACbZ,EAAKW,SAAS,EAAG,EAAG,EAAG,GAChBX,EACT,KAAKN,EACH,IAAMK,EAAwB,IAAlBC,EAAKa,SAAiB,EAAIb,EAAKa,SAAW,EAChDC,EAAKd,EAAKd,UAGhB,OAFAc,EAAKY,QAAQE,EAAKf,GAClBC,EAAKW,SAAS,EAAG,EAAG,EAAG,GAChBX,EAET,KAAKP,EAEH,OADAO,EAAKW,SAAS,EAAG,EAAG,EAAG,GAChBX,EACT,KAAKR,EAEH,OADAQ,EAAKe,WAAW,EAAG,EAAG,GACff,EACT,QACE,MAAM,IAAIgB,MAAJ,gCAAAC,OAA0CZ,KAK7Ca,CAAab,EAAWI,GAAOU,UC/CxC,SAASC,EAASf,EAAWgB,GAC3B,IAAKA,EAAKC,OACR,MAAO,GAOT,IALA,IAAMC,EAAS,GACTC,ED6CD,SAA4BnB,GACjC,OAAQA,GACN,KAAKd,EACL,KAAKC,EACL,KAAKC,EACL,KAAKC,EACH,OAAO,EACT,QACE,OAAO,GCrDM+B,CAAkBpB,GAC7BqB,EAAeF,EAAWpB,EAAiBC,GAAa,EACxDsB,EAAYH,EAAW,kBAAME,GAAe,SAACjB,GAAD,OAAWL,EAAiBC,EAAWI,IACrF/D,EAAI,EACDA,EAAI2E,EAAKC,QAAQ,CAKtB,IALsB,IAChBM,EAAWP,EAAK3E,GAAhBkF,OACAnB,EAAQD,EAAkBH,EAAWuB,EAAOnB,OAC5CoB,EAAQ,GACRC,EAAQ,CAAErB,QAAOa,OAAQK,EAAUlB,GAAQoB,SAC1CnF,EAAI2E,EAAKC,QAAUM,EAAOnB,OAASqB,EAAMrB,OAASmB,EAAOnB,MAAQqB,EAAMrB,MAAQqB,EAAMR,QAC1FO,EAAME,KAAKV,EAAK3E,IAChBkF,EAASP,EAAK3E,KAAKkF,OAEjBC,EAAMP,QACRC,EAAOQ,KAAKD,GAGhB,OAAOP,EAGTS,KAAKC,UAAY,SAAAC,GAA2C,IAAAC,EAAAD,EAA/BE,KACrBC,EAAUjB,EAD0Ce,EAAvB9B,UAAuB8B,EAAZG,QAE9CN,KAAKO,YAAYF","file":"62193e2280b46f2641a3.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/project-schedule/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export function leapYear(year) {\n  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n}\nexport function getMonthLength(year, month) {\n  return new Date(year, month + 1, 0).getDate();\n}\nexport var second = 1000;\nexport var minute = 60000;\nexport var hour = 3600000;\nexport var day = 86400000;\nexport var week = 604800000;\nexport function toSeconds(milliseconds) {\n  return milliseconds / second;\n}\nexport function toMinutes(milliseconds) {\n  return milliseconds / minute;\n}\nexport function toHours(milliseconds) {\n  return milliseconds / hour;\n}\nexport function toDays(milliseconds) {\n  return milliseconds / day;\n}\nexport function toWeeks(milliseconds) {\n  return milliseconds / week;\n}\nexport function getTimeBetween(begin, end) {\n  return end.getTime() - begin.getTime();\n}","import { hour, minute, week, day, getMonthLength } from 'eventa/build/utils/dateTime'\n\nexport const MINUTE = 'minute'\nexport const HOUR = 'hour'\nexport const DAY = 'day'\nexport const WEEK = 'week'\nexport const MONTH = 'month'\nexport const YEAR = 'year'\n\nexport const PARTITIONS_SIZES = {\n  [MINUTE]: minute,\n  [HOUR]: hour,\n  [DAY]: day,\n  [WEEK]: week,\n  [MONTH]: date => day * getMonthLength(date.getFullYear(), date.getMonth()),\n  [YEAR]: date => {\n    const year = date.getFullYear()\n    let sum = 0\n    for (let i = 0; i < 12; i++) {\n      sum += day * getMonthLength(year, i)\n    }\n    return sum\n  }\n}\n","import {\n  DAY,\n  HOUR,\n  MINUTE,\n  MONTH,\n  PARTITIONS_SIZES,\n  WEEK,\n  YEAR\n} from '../constants/partitions'\n\nexport function getPartitionSize (partition, ms) {\n  const size = PARTITIONS_SIZES[partition]\n  if (typeof size === 'function') {\n    const date = new Date(ms)\n    return size(date)\n  }\n  return size\n}\n\nfunction getStartDate (partition, start) {\n  const date = new Date(start)\n  switch (partition) {\n    case YEAR:\n      date.setMonth(0, 0)\n      date.setHours(0, 0, 0, 0)\n      return date\n    case MONTH:\n      date.setDate(0)\n      date.setHours(0, 0, 0, 0)\n      return date\n    case WEEK: {\n      const day = date.getDay() === 0 ? 6 : date.getDay() - 1\n      const dt = date.getDate()\n      date.setDate(dt - day)\n      date.setHours(0, 0, 0, 0)\n      return date\n    }\n    case DAY:\n      date.setHours(0, 0, 0, 0)\n      return date\n    case HOUR:\n      date.setMinutes(0, 0, 0)\n      return date\n    default:\n      throw new Error(`Unknown start for partition: ${partition}`)\n  }\n}\n\nexport function getPartitionStart (partition, start) {\n  return getStartDate(partition, start).getTime()\n}\n\nexport function isStaticPartition (partition) {\n  switch (partition) {\n    case MINUTE:\n    case HOUR:\n    case DAY:\n    case WEEK:\n      return true\n    default:\n      return false\n  }\n}\n\nfunction toLocale (date, locale, options) {\n  return date.toLocaleString(locale, options)\n}\n\nfunction getHeaderPartitionOptions (partition) {\n  switch (partition) {\n    case YEAR:\n      return { year: 'numeric' }\n    case MONTH:\n      return { month: 'long', year: 'numeric' }\n    case WEEK:\n      return { month: 'short', year: 'numeric', day: 'numeric' }\n    case DAY:\n      return { month: 'numeric', year: 'numeric', day: 'numeric', weekday: 'long' }\n    case HOUR:\n      return { month: 'numeric', year: 'numeric', day: 'numeric', weekday: 'short', hour: 'numeric' }\n    default:\n      throw new Error(`Unexpected partition name: ${partition}`)\n  }\n}\n\nexport function headerPartitionToString (partition, date, locale = 'ru-RU') {\n  const options = getHeaderPartitionOptions(partition)\n  return toLocale(date, locale, options)\n}\n\nfunction getItemPartitionOptions (partition) {\n  switch (partition) {\n    case YEAR:\n      return { month: 'numeric', day: 'numeric', weekday: 'short', hour: 'numeric', minute: 'numeric' }\n    case MONTH:\n    case WEEK:\n      return { day: 'numeric', weekday: 'long', hour: 'numeric', minute: 'numeric' }\n    case DAY:\n      return { hour: 'numeric', minute: 'numeric' }\n    case HOUR:\n      return { minute: 'numeric' }\n    default:\n      throw new Error(`Unexpected partition name: ${partition}`)\n  }\n}\n\nexport function itemPartitionToString (partition, date, locale = 'ru-RU') {\n  const options = getItemPartitionOptions(partition)\n  return toLocale(date, locale, options)\n}\n\nexport function toZeroBased (val) {\n  return String(val < 10 ? '0' + val : val)\n}\n\nexport function partitionToString (partition, date, type = 'item', locale) {\n  const pts = type === 'item' ? itemPartitionToString : headerPartitionToString\n  return pts(partition, date, locale)\n}\n\nexport function periodToString (partition, period, type = 'item', locale) {\n  const pts = (date) => partitionToString(partition, date, type, locale)\n  const from = new Date(period.start)\n  const fromString = pts(from)\n  if (period.start === period.end) {\n    return fromString\n  }\n  const to = new Date(period.end)\n  const toString = pts(to)\n  let i = 0\n  const splitter = /, |[:-]| /\n  const fromPartitions = fromString.split(splitter)\n  const toPartitions = toString.split(splitter)\n  while (i < fromPartitions.length && fromPartitions[i] === toPartitions[i]) {\n    i++\n  }\n  if (i === fromString.length) {\n    return fromString\n  }\n  const toStringBegin = toString.indexOf(toPartitions[i])\n  return `${fromString} - ${toString.slice(toStringBegin)}`\n}\n","import { isStaticPartition, getPartitionSize, getPartitionStart } from '../../utils/grouper'\n\nfunction groupBy (partition, list) {\n  if (!list.length) {\n    return []\n  }\n  const groups = []\n  const isStatic = isStaticPartition(partition)\n  const staticLength = isStatic ? getPartitionSize(partition) : 0\n  const getLength = isStatic ? () => staticLength : (start) => getPartitionSize(partition, start)\n  let i = 0\n  while (i < list.length) {\n    let { period } = list[i]\n    const start = getPartitionStart(partition, period.start)\n    const items = []\n    const group = { start, length: getLength(start), items }\n    while (i < list.length && period.start >= group.start && period.start < group.start + group.length) {\n      items.push(list[i])\n      period = list[i++].period\n    }\n    if (items.length) {\n      groups.push(group)\n    }\n  }\n  return groups\n}\n\nself.onmessage = function ({ data: { partition, events } }) {\n  const grouped = groupBy(partition, events)\n  self.postMessage(grouped)\n}\n"],"sourceRoot":""}